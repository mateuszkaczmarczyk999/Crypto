@model Array
@{
    ViewBag.Title = "Curency Market";
}
<body>
    <h2>Curency Market</h2>

    <div class="container">
        <table class="table table-bordered">
            <tbody>
                <tr>
                    @foreach (var signature in Model)
            {
                        <th>@signature</th>
                    }
                </tr>
                @for (int i = 0; i < Model.Length; i++)
                {
                    <tr>
                        @for (int j = 0; j < Model.Length; j++)
                {
                            <td id=@i@j>@i@j</td>
                        }
                    </tr>
                }

            </tbody>
        </table>
    </div>
@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script>
        
        $(function() {
            /******************************************/
            //Create the proxy
            var market = $.connection.marketHub;

            market.client.updateRates = function (currencyRateArg) {
                var up = '▲';
                var down = '▼';
                var value = currencyRateArg.Value;
                var id = currencyRateArg.ChangeFrom.toString() + currencyRateArg.ChangeTo.toString();
                $('#' + id).text(value);
            }

            
            console.log(market);
            $.connection.hub.start().done(function () {
                //alert("Test");
                //market.server.testMethod();
            });
        });
    </script>
}
            




